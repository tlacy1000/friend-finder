
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- bootstrap links -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <!-- bootswatch -->
  <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/united/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-WTtvlZJeRyCiKUtbQ88X1x9uHmKi0eHCbQ8irbzqSLkE0DpAZuixT5yFvgX0CjIu" crossorigin="anonymous">
  <!-- jquery link -->
  <script src="https://code.jquery.com/jquery.js"></script>
  <title>Friend Finder</title>
</head>

<body style="margin: auto 2rem auto 2rem">
  <h1>Survey Questions</h1>
  <hr>
  <form>
    <div class="form-group">
      <label>Name</label>
      <input type="text" class="form-control" id="name" placeholder="Name" required>
      <small class="form-text text-muted">Required</small>
    </div>
    <div class="form-group">
      <label>Link to Photo Image</label>
      <input type="text" class="form-control" id="photo" placeholder="Link" required>
      <small class="form-text text-muted">Required</small>
    </div>

    <div class="form-group">
      <label for="exampleFormControlSelect1">I enjoy creative pursuits.</label>
      <select class="form-control" id="exampleFormControlSelect1">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect2">I experience emotions intensely.</label>
      <select class="form-control" id="exampleFormControlSelect2">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect3">I enjoy scientific research.</label>
      <select class="form-control" id="exampleFormControlSelect3">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect4">I am often the life of the party.</label>
      <select class="form-control" id="exampleFormControlSelect4">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect5">I dislike being the center of attention.</label>
      <select class="form-control" id="exampleFormControlSelect5">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect6">I am generally an agreeable person.</label>
      <select class="form-control" id="exampleFormControlSelect6">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect7">I have neurotic tendencies.</label>
      <select class="form-control" id="exampleFormControlSelect7">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect8"> I value law and order- following rules is important to me. </label>
      <select class="form-control" id="exampleFormControlSelect8">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect9"> I see myself as extraverted, enthusiastic</label>
      <select class="form-control" id="exampleFormControlSelect9">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlSelect10"> I am generally open to new experiences. </label>
      <select class="form-control" id="exampleFormControlSelect10">
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <button type="button" data-toggle="modal" data-target="#results-modal" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
  </form>

  <ul class="nav" style="margin: auto 0">
    <li class="nav-item">
      <a class="nav-link" href="/home">Home</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/api/friends">API Friendlist</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="https://github.com/tlacy1000/friend-finder/tree/master">GitHub Repo</a>
    </li>
  </ul>

  <div class="modal" role="dialog" id="results-modal" data-target="#results-modal">
    <!-- <div class="modal-dialog" role="document"> -->
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Best Match</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h5 id="match-name">Best Match</h5>
        <img id="match-img" src="">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
    <!-- </div> -->
  </div>


  <script type="text/javascript">
    $(document).ready(function () {
      $("#submit").click(function (event) {
        event.preventDefault();
        var userData = {
          name: $("#name").val(),
          photo: $("#photo").val(),
          scores: [
            $("#exampleFormControlSelect1").val(), $("#exampleFormControlSelect2").val(),
            $("#exampleFormControlSelect3").val(), $("#exampleFormControlSelect4").val(),
            $("#exampleFormControlSelect5").val(), $("#exampleFormControlSelect6").val(),
            $("#exampleFormControlSelect7").val(), $("#exampleFormControlSelect8").val(),
            $("#exampleFormControlSelect9").val(), $("#exampleFormControlSelect10").val()
          ]
        };
      
        // vain attempts to prevent blank submissions
        $.post("/api/friends", userData, function (data) {
          var placeholder = $("#name").attr("placeholder");
          if (userData.name === placeholder) {
            $("#match-name").text("Please fill in the required field to continue.");
          }else if(userData.photo === "Link"){
            $("#match-name").text("Please fill in the required field to continue.");
          } else{
            $("#match-name").text(data.name);
            $("#match-img").attr("src", data.photo);
          }
        })
      })
    });
  </script>
</body>

</html>